<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Meetup is a free responsive single page bootstrap template by designerdada.com">
  <meta name="author" content="Akash Bhadange">
  <title>Home Automation - Web Interface</title>

  <script type="text/javascript" src="/webiopi.js"></script>
    <script type="text/javascript">
    webiopi().ready(function() {
        
	var button1 = webiopi().createGPIOButton(23, "Light", mousedown);
	
	var buzzBtn = webiopi().createGPIOButton(16, "Alarm", function() {
		buzzBtn= webiopi().digitalRead(16);
		if(buzzBtn==1)
		{
		   webiopi().digitalWrite(16, 0);
		}
		else
		{
		   webiopi().digitalWrite(16, 1);
		}
	});
	
	var camButton = webiopi().createButton("camButton", "Camera", function() {
                       webiopi().callMacro("setCamera", [],[]);
                });

        $("#control1").append(button1);
	$("#control2").append(buzzBtn);	
	$("#control3").append(camButton);

        // pass true to refresh repeatedly of false to refresh once
                webiopi().refreshGPIO(true);
    });

    function mousedown()
            {
               ledBtn= webiopi().digitalRead(23);
               if(ledBtn==1)
               {
                  webiopi().digitalWrite(23, 0);
               }
               else
               {
                   webiopi().digitalWrite(23, 1);
               }             
            }

		// Every 2000ms (2 seconds) Call the function to go get the data from Python
		setInterval ("callMacro_getData()", 2000);{
		}

		// Go get the Data from the Python Macro getData
                function callMacro_getData(){
    			webiopi().callMacro("getData", [], macro_getData_Callback);
		}

		// Get the Data returned from the Python macro getData
		function macro_getData_Callback(macro, args, data) {

		//Parse data from python macro getData
		var i = JSON.parse(data);
			motionDiv.innerHTML = i[0]
			tempDiv.innerHTML = i[1]
			humidDiv.innerHTML = i[2]
			myDiv3.innerHTML = i[3]	
		}

    </script>
    <style type="text/css">
        button {
            display: block;
            margin: 5px 5px 5px 5px;
            width: 50%;
            height: 45px;
            font-size: 24pt;
            font-weight: bold;
            color: white;
        }
	#control1 {
	    margin: 1em;
	    font-size: 1em;
	}
	#control2 {
	    margin: 1em;
	    font-size: 1em;
	}
	#control3 {
	    margin: 1em;
	    font-size: 1em;
	}
        #gpio23.LOW {
            background-color: #800000;
	    color: Grey;
        }
        #gpio23.HIGH {
            background-color: #33cc33;
	    color: Black;
        }
	#gpio16.LOW {
            background-color: #800000;
	    color: Grey;
        }
        #gpio16.HIGH {
            background-color: #33cc33;
	    color: Black;
        }
	#motionDiv {
	    font-size: 2em;
	    font-weight: bold;
	    text-transform: uppercase;
	}
	#tempDiv {
	    font-size: 2em;
	    font-weight: bold;
	    text-transform: uppercase;
	}
	#humidDiv {
	    font-size: 2em;
	    font-weight: bold;
	    text-transform: uppercase;
	}
	
    </style>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="css/themify-icons.css" rel="stylesheet">
  <link href='css/dosis-font.css' rel='stylesheet' type='text/css'>
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>
    <body id="page-top" data-spy="scroll" data-target=".side-menu">
      
      <div class="container">

        <!-- Start: Control GPIOs -->

        <div class="row me-row content-ct speaker" id="speakers">
          <h1 class="row-title">Monitor Your Home</h1>

          <div class="col-md-4 col-sm-6 feature">
            <img src="img/sensor.png" class="speaker-img">
            <h3>Motion</h3>
		<p>Has motion been detected in your home?</p>
		<div id="motionDiv" align="center"></div>
          </div>

          <div class="col-md-4 col-sm-6 feature">
            <img src="img/temperature.png" class="speaker-img">
	    <h3>Temperature</h3>
	    	<p>The current temperature in your home is: </p>
		<div id="tempDiv" align="center"></div>
          </div>

          <div class="col-md-4 col-sm-6 feature">
            <img src="img/humidity.png" class="speaker-img">
	    <h3>Humidity</h3>
		<p>The current humidity level in your home is: </p>
		<div id="humidDiv" align="center"></div>
          </div>
        </div>
      <!-- End: Control GPIOs -->



	<!-- Start: Desc -->

        <div class="row me-row content-ct speaker" id="speakers">
          <h1 class="row-title">Control Your Home</h1>

          <div class="col-md-4 col-sm-6 feature">
            <img src="img/light.png" class="speaker-img">

	    <div id="control1" align="center"></div>
            <p>Turn your lamp ON or OFF</p>
	  </div>

          <div class="col-md-4 col-sm-6 feature">
            <img src="img/alarm.png" class="speaker-img">

	    <div id="control2" align="center"></div>
	    <p>Turn your alarm ON or OFF</p>          
	  </div>

          <div class="col-md-4 col-sm-6 feature">
            <img src="img/camera.png" class="speaker-img">

            <div id="control3" align="center"></div> 
	    <p>Take a picture</p> 
	</div>

        </div>
        <!-- End: Desc -->

	</div>

      <!-- Start: Footer -->
      <div class="container-fluid footer">
        <div class="row contact"> 
        <div class="row footer-credit">
          <div class="col-md-6 col-sm-6">
            <p>&copy; 2015, <a href="http://www.designerdada.com">DesignerDada.com</a> | All rights reserved.</p>
          </div>
          <div class="col-md-6 col-sm-6"> 
            <ul class="footer-menu">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms &amp; Condition</a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- End: Footer -->

      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src="js/jquery.min.js"></script>
      <!-- Include all compiled plugins (below), or include individual files as needed -->
      <script src="js/bootstrap.min.js"></script>
      <script src="js/jquery.easing.min.js"></script>
      <script src="js/scrolling-nav.js"></script>
      <script src="js/validator.js"></script>
      <!-- Google Analytics -->
      <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-29231762-2', 'auto');
      ga('send', 'pageview');
      </script>
    </body>
    </html>